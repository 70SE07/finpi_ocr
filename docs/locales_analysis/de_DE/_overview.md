# Германия (de_DE) - ФИНАЛЬНЫЙ АНАЛИЗ

## Базовая информация

| Параметр | Значение |
|----------|----------|
| Код локали | de_DE |
| Язык | Немецкий (German) |
| Валюта | EUR |
| Символ валюты | EUR (после суммы) или € |
| Десятичный разделитель | , (запятая) ИЛИ . (точка)! |
| Разделитель тысяч | . (точка) |
| Формат суммы | 1.234,56 или 16.70 |

## КРИТИЧНО: Два формата чисел!

| Магазин | Разделитель |
|---------|-------------|
| Lidl, ALDI, dm, EDEKA, HIT, Penny, Netto, Shell | , (запятая) |
| **CenterShop** | **. (точка)** |

## Форматы даты

- `DD.MM.YYYY` - 31.07.2025
- `DD.MM.YY` - 31.07.25
- Время: `HH:MM` или `HH:MM:SS`

## Налоговая система (MwSt) - СЛОЖНАЯ!

| Класс | Lidl/ALDI | HIT/Penny | dm | Пекарни |
|-------|-----------|-----------|-----|---------|
| A | 7% | **19%** | - | - |
| B | 19% | **7%** | - | - |
| C | - | - | - | 19% |
| 1 | - | - | 19% | - |
| §1 | - | - | Pfand | - |
| +B | - | - | - | - |
| AW/BW | - | - | - | - |
| F | - | Fresh | - | - |

**ВАЖНО:** Tax class A и B могут быть инвертированы!

## Типичная структура чека

```
┌─────────────────────────────────────────┐
│ HEADER                                  │
│ - Логотип/название магазина             │
│ - Адрес                                 │
│ - Дата, время                           │
├─────────────────────────────────────────┤
│ [КАТЕГОРИИ - HIT only]                  │
├─────────────────────────────────────────┤
│ ITEMS                                   │
│ - Товарные позиции                      │
│ - Скидки (Rabatt/Preisvorteil)          │
│ - Pfand                                 │
├─────────────────────────────────────────┤
│ TOTALS                                  │
│ - Summe / SUMME[N] / Gesamtsumme        │
│ - Способ оплаты                         │
├─────────────────────────────────────────┤
│ TAX BLOCK                               │
│ - MwSt breakdown (Netto + MwSt = Brutto)│
├─────────────────────────────────────────┤
│ FOOTER                                  │
│ - TSE данные                            │
│ - K-U-N-D-E-N-B-E-L-E-G                 │
│ - PAYBACK info                          │
└─────────────────────────────────────────┘
```

## Проанализированные магазины (13+)

| Магазин | Тип | Файлы | Особенности |
|---------|-----|-------|-------------|
| [Lidl](lidl.md) | Дискаунтер | **19 чеков!** | Preisvorteil, весовые, Pfandrückgabe |
| [ALDI SÜD](aldi.md) | Дискаунтер | IMG_1724, IMG_2529 | SKU, Rabatt % |
| [Netto](netto.md) | Дискаунтер | IMG_1256 | EUR в строке |
| [Penny](penny.md) | Дискаунтер | IMG_3020 | A=19%, B=7% |
| [EDEKA](edeka.md) | Супермаркет | IMG_1331-1931 | Posten, AW/BW codes |
| [HIT](hit.md) | Гипермаркет | IMG_1373-1982 | Категории, F маркер |
| [dm](dm.md), [dm-2](dm-2.md) | Дрогери | IMG_1252, IMG_2727 | Tax=1, §1 Pfand |
| [Shell](shell.md) | Заправка | IMG_1391 | SKU, +A/+B |
| [CenterShop](centershop.md) | Non-food | IMG_1400 | ТОЧКА разделитель! |
| [Bäckerei Müller](baeckerei-mueller.md) | Пекарня | IMG_2034 | Tax=C, Rechnung |
| [Kleins Backstube](kleins-backstube.md) | Пекарня | IMG_3185 | #код, gebucht um |

## Сводная таблица форматов

| Магазин | SKU | Tax codes | EUR в строке | Pfand | Скидки |
|---------|-----|-----------|--------------|-------|--------|
| Lidl | - | A/B | - | Ja | Preisvorteil |
| ALDI | Да | A/B | - | Ja | Rabatt % |
| Netto | - | A/B | Да | Ja | - |
| Penny | - | A/B (инверт) | Да | Ja | - |
| EDEKA | - | A/B/AW/BW/+B | - | +B | - |
| HIT | (код) | A/B (инверт) | - | A* | *** Discount *** |
| dm | - | 1/§1 | - | §1 | - |
| Shell | Да | +A/+B | Да | - | - |
| CenterShop | Да (EAN) | 19% | - | *0.25 | - |
| Пекарни | #код | C/7% | - | - | - |

## Ключевые особенности

1. **Инверсия tax classes** - HIT, Penny: A=19%, B=7%
2. **Разные коды Pfand** - M, B, +B, §1, A*, *
3. **Категории на чеке** - только HIT
4. **SKU форматы** - 4-6 цифр (ALDI), EAN-13 (CenterShop), #код (пекарни)
5. **Точка как разделитель** - CenterShop!
6. **Rabatt в процентах** - только ALDI

## Checksum валидация

**ВСЕ 30+ чеков: Расхождение 0.00**

| Метод | Работает |
|-------|----------|
| Receipt Total | 100% |
| Tax Block | 100% |
| Item Math | ~70% |

## Статистика Lidl (самая большая выборка)

| Метрика | Значение |
|---------|----------|
| Всего чеков | 19 |
| de_DE | 17 (1 дубликат) |
| pt_PT | 1 |
| Диапазон сумм | 4,09 - 179,24 EUR |
| Филиалы | 3 города |
