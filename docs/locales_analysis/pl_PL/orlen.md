# Orlen (pl_PL)

## Источник
- **Файл:** data/input/PL_004.jpeg
- **Дата анализа:** 2025-12-26
- **Дата чека:** 21-11-2025 20:35

## ВАЖНО: Десятичный разделитель - ТОЧКА!

```
DO ZAPŁATY:     50.97
Karta:          50.97
```

**Это исключение для Польши!** Обычно используется запятая.

## Метаданные чека

| Поле | Значение |
|------|----------|
| Сеть | ORLEN S.A. |
| Адрес головного офиса | 09-411 Płock, ul. Chemików 7 |
| Локация | STACJA PALIW NR 4375 W ŁĄCE |
| Адрес заправки | ŁĄKA 28A, 59-700 BOLESŁAWIEC |
| NIP | 774-00-01-454 |
| BDO | 000007103 |
| Номер чека | W072500 |
| Валюта | PLN |
| Способ оплаты | Karta |
| Итого | 50.97 PLN |

## Ground Truth таблица

| # | raw_name | qty | unit_price | total_price | tax |
|---|----------|-----|------------|-------------|-----|
| 1 | ORZESZ.MIESZAN.STUDENCKA 150g | 1 | 10.99 | 10.99 | C |
| 2 | P TEREA AMBER SELECTION | 2 | 19.99 | 39.98 | A |

## Checksum валидация

```
10.99 + 39.98 = 50.97

DO ZAPŁATY на чеке: 50.97 ✓
```

**Расхождение: 0.00**

## Паттерн товарной строки

```
ORZESZ.MIESZAN.STUDENCKA 150g (C) 1*10.99
                                      10.99C
P TEREA AMBER SELECTION (A) 2*19.99
                                      39.98A
```

### Формат:
1. `[название] ([tax]) [qty]*[unit_price]`
2. `[total_price][tax]` на следующей строке

**Особенность:** Tax class показан ДВА раза - в скобках и в конце итоговой цены.

## Tax Block

```
Sprzedaż opodatkowana A:         39.98
Sprzedaż opodatkowana C:         10.99
Kwota PTU A 23%                   7.48
Kwota PTU C 5%                    0.52
SUMA PTU                          8.00
```

**Проверка:**
- A: 39.98 / 1.23 = 32.50, 32.50 × 0.23 = 7.48 ✓
- C: 10.99 / 1.05 = 10.47, 10.47 × 0.05 = 0.52 ✓
- Total: 7.48 + 0.52 = 8.00 ✓

## Структура чека

```
┌─────────────────────────────────────────┐
│ [logo] ORLEN                            │
│ ORLEN S.A.                              │
│ 09-411 PŁOCK, UL.CHEMIKÓW 7             │
│ STACJA PALIW NR 4375 W ŁĄCE             │
│ ŁĄKA 28A, 59-700 BOLESŁAWIEC            │
│ BDO 000007103                           │
│ NIP: 774-00-01-454        W072500       │
├─────────────────────────────────────────┤
│ PARAGON FISKALNY                        │
├─────────────────────────────────────────┤
│ [название] ([tax]) [qty]*[price]        │
│                           [total][tax]  │
├─────────────────────────────────────────┤
│ Sprzedaż opodatkowana A:                │
│ Sprzedaż opodatkowana C:                │
│ Kwota PTU A 23%                         │
│ Kwota PTU C 5%                          │
│ SUMA PTU                                │
├─────────────────────────────────────────┤
│ SUMA=            PLN          50.97     │
│ DO ZAPŁATY:                   50.97     │
├─────────────────────────────────────────┤
│ ROZLICZENIE PŁATNOŚCI                   │
│ Karta:                        50.97     │
├─────────────────────────────────────────┤
│ [фискальные данные]                     │
│ [программа VITAY]                       │
│ [штрих-код]                             │
└─────────────────────────────────────────┘
```

## Особенности

1. **ТОЧКА как десятичный разделитель!** (не запятая)
2. **Tax class в скобках и в конце** - `(C)` и `10.99C`
3. **Многострочный формат** - total на отдельной строке
4. **Заправка** - STACJA PALIW
5. **VITAY** - бонусная программа Orlen

## Выводы для DTO

| Поле | Присутствует | Пример |
|------|--------------|--------|
| raw_name | Да | "ORZESZ.MIESZAN.STUDENCKA 150g" |
| quantity | Да | 1 или 2 |
| unit_price | Да | 10.99 или 19.99 |
| total_price | Да | 10.99 или 39.98 |
| tax_class | Да | "A" или "C" |

## Критическое наблюдение для системы

```python
# Польша: ДВА формата чисел!

# Carrefour, Cropp:
decimal_separator = ","  # 254,32

# Orlen:
decimal_separator = "."  # 50.97

# Решение: определять по магазину или эвристически
```

**Это важно для системного решения!**

